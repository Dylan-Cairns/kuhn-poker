/* Auto-generated contract constants.
 * Source: contracts/kuhn.v1.json
 * Generated by: scripts/generate_contract_bindings.py
 */

export const CONTRACT_NAME = 'kuhn_poker' as const
export const CONTRACT_VERSION = '1.0.0' as const

export const PLAYERS = [
  "player_0",
  "player_1"
] as const
export type PlayerId = (typeof PLAYERS)[number]

export const CARDS = [
  "J",
  "Q",
  "K"
] as const
export type Card = (typeof CARDS)[number]

export const PUBLIC_ACTIONS = [
  "check",
  "bet",
  "call",
  "fold"
] as const
export type PublicAction = (typeof PUBLIC_ACTIONS)[number]

export const PHASES = [
  "deal",
  "p0_act",
  "p1_act",
  "p0_response",
  "p1_response",
  "terminal"
] as const
export type Phase = (typeof PHASES)[number]

export const INITIAL_PHASE = 'p0_act' as const
export const INITIAL_ACTOR = 'player_0' as const
export const TERMINAL_PHASE = 'terminal' as const
export const OPEN_ACTION_PHASES = [
  "p0_act",
  "p1_act"
] as const
export const RESPONSE_ACTION_PHASES = [
  "p0_response",
  "p1_response"
] as const

export const ACTIONS = [
  {
    "id": 0,
    "name": "CHECK_OR_CALL",
    "labels": {
      "open": "check",
      "response": "call"
    }
  },
  {
    "id": 1,
    "name": "BET",
    "labels": {
      "open": "bet",
      "response": "bet"
    }
  },
  {
    "id": 2,
    "name": "FOLD",
    "labels": {
      "open": "fold",
      "response": "fold"
    }
  }
] as const
export type ActionName = (typeof ACTIONS)[number]["name"]
export type ActionId = (typeof ACTIONS)[number]["id"]
export type ActionMask = readonly [number, number, number]
export const ACTION_DIM = 3 as const
export const ACTION_CHECK_OR_CALL = 0 as const
export const ACTION_BET = 1 as const
export const ACTION_FOLD = 2 as const

export const ACTION_NAME_BY_ID = {
  "0": "CHECK_OR_CALL",
  "1": "BET",
  "2": "FOLD"
} as const
export const ACTION_ID_BY_NAME = {
  "CHECK_OR_CALL": 0,
  "BET": 1,
  "FOLD": 2
} as const
export const ACTION_OPEN_LABEL_BY_ID = {
  "0": "check",
  "1": "bet",
  "2": "fold"
} as const
export const ACTION_RESPONSE_LABEL_BY_ID = {
  "0": "call",
  "1": "bet",
  "2": "fold"
} as const

export const LEGAL_MASK_BY_PHASE = {
  "deal": [
    0,
    0,
    0
  ],
  "p0_act": [
    1,
    1,
    0
  ],
  "p1_act": [
    1,
    1,
    0
  ],
  "p0_response": [
    1,
    0,
    1
  ],
  "p1_response": [
    1,
    0,
    1
  ],
  "terminal": [
    0,
    0,
    0
  ]
} as const satisfies Record<Phase, ActionMask>
export const NO_LEGAL_ACTION_MASK = LEGAL_MASK_BY_PHASE[TERMINAL_PHASE]

export const OBSERVATION_DIM = 10 as const
export const OBS_PRIVATE_CARD_OFFSET = 0 as const
export const OBS_PRIVATE_CARD_DIM = 3 as const
export const OBS_HISTORY_OFFSET = 3 as const
export const OBS_HISTORY_DIM = 5 as const
export const OBS_ACTOR_OFFSET = 8 as const
export const OBS_ACTOR_DIM = 2 as const
export const OBS_HISTORY_BUCKETS = [
  {
    "index": 0,
    "sequence": []
  },
  {
    "index": 1,
    "sequence": [
      "check"
    ]
  },
  {
    "index": 2,
    "sequence": [
      "bet"
    ]
  },
  {
    "index": 3,
    "sequence": [
      "check",
      "bet"
    ]
  },
  {
    "index": 4,
    "sequence": null
  }
] as const
export const OBS_HISTORY_SEQUENCE_TO_INDEX = {
  "": 0,
  "check": 1,
  "bet": 2,
  "check|bet": 3
} as const
export const OBS_TERMINAL_HISTORY_INDEX = 4 as const

export const CARD_INDEX_BY_LABEL = {
  "J": 0,
  "Q": 1,
  "K": 2
} as const
export const PLAYER_INDEX_BY_ID = {
  "player_0": 0,
  "player_1": 1
} as const

export const ONNX_INPUT_OBSERVATION_NAME = 'observation' as const
export const ONNX_INPUT_ACTION_MASK_NAME = 'action_mask' as const
export const ONNX_OUTPUT_MASKED_LOGITS_NAME = 'masked_logits' as const
export const ONNX_OUTPUT_VALUE_NAME = 'value' as const
export const ONNX_VALUE_DIM = 1 as const

export type ActionSymbol = "CHECK_OR_CALL" | "BET" | "FOLD"
